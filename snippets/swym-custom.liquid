<script defer>
  function swymCallbackFn(swat) {
    // your API calls go here
    document.addEventListener('swym:collections-loaded', function () {
      swat.initializeActionButtons('.collection-split__product-grid');
    });
  }
  if (!window.SwymCallbacks) {
    window.SwymCallbacks = [];
  }
  window.SwymCallbacks.push(swymCallbackFn);

  document.addEventListener('DOMContentLoaded', function () {
    document.dispatchEvent(new CustomEvent('swym:collections-loaded'));
  });

  function renderWishlistCounter(swat) {
    var counter_elem = document.querySelectorAll('.swym-wishlist-header-counter'); /* Custom header can be added here.*/
    if (counter_elem) {
      for (var i = 0; i < counter_elem.length; i++) {
        if (swat.renderWishlistCount) {
          swat.renderWishlistCount(counter_elem[i], function (count, element) {
            console.log('debug - renderWishlistCount', count, element);
              if (count === 0) {
            element.style.display = 'none';
          } else {
            element.style.display = 'block';
            element.textContent = count;
          }
          });
        }
      }
    }
  }
  if (!window.SwymCallbacks) {
    window.SwymCallbacks = [];
  }
  window.SwymCallbacks.push(renderWishlistCounter);
</script>
